/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 0.5.0
 *
 */
(function(a){jQuery.fn.extend({slimScroll:function(b){var c={wheelStep:20,width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,railVisible:!1,railColor:"#333",railOpacity:"0.2",railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,scroll:0,scrollTo:null,duration:!1,easing:"swing"},d=ops=a.extend(c,b);return this.each(function(){function M(a,b,c,d){var e=a;if(b){e=parseInt(J.css("top"))+a*m/100*J.outerHeight();var f=F.outerHeight()-J.outerHeight();e=Math.min(Math.max(e,0),f),J.css({top:e+"px"})}i=parseInt(J.css("top"))/(F.outerHeight()-J.outerHeight()),e=i*(F[0].scrollHeight-F.outerHeight());if(c){e=a;var g=e/F[0].scrollHeight*F.outerHeight();J.css({top:g+"px"})}if(d){var h=F[0].scrollHeight-F.outerHeight();e=a>h?h:a;var j=e/h,g=j*(F.outerHeight()-J.outerHeight());J.css({top:g+"px"})}F.scrollTop(e),P(),Q()}function O(){h=Math.max(F.outerHeight()/F[0].scrollHeight*F.outerHeight(),k),J.css({height:h+"px"})}function P(){O(),clearTimeout(g),l=A&&i==~~i;if(h>=F.outerHeight()){l=!0;return}J.stop(!0,!0).fadeIn("fast"),x&&I.stop(!0,!0).fadeIn("fast")}function Q(){w||(g=setTimeout(function(){!e&&!f&&(J.fadeOut("slow"),I.fadeOut("slow"))},1e3))}var c,e,f,g,h,i,j="<div></div>",k=30,l=!1,m=parseInt(d.wheelStep),n=d.width,p=d.height,q=d.size,r=d.color,s=d.position,t=d.distance,u=d.start,v=d.opacity,w=d.alwaysVisible,x=d.railVisible,y=d.railColor,z=d.railOpacity,A=d.allowPageScroll,B=d.scroll,C=d.scrollTo,D=d.duration,E=d.easing,F=a(this);if(F.parent().hasClass("slimScrollDiv")){J=F.parent().find(".slimScrollBar"),I=F.parent().find(".slimScrollRail"),B&&M(F.scrollTop()+parseInt(B),!1,!0);if(b.height&&p){if(D){var G=a(F).add(a(F).parent());G.animate({height:p},D,E)}else F.parent().css("height",p),F.css("height",p);O()}C&&F.promise().done(function(){O();var a=parseInt(C);M(a,!1,!1,!0)});return}var H=a(j).addClass(d.wrapperClass).css({position:"relative",overflow:"hidden",width:n,height:p});F.css({overflow:"hidden",width:n,height:p});var I=a(j).addClass(d.railClass).css({width:q,height:"100%",position:"absolute",top:0,display:w&&x?"block":"none","border-radius":q,background:y,opacity:z,zIndex:90}),J=a(j).addClass(d.barClass).css({background:r,width:q,position:"absolute",top:0,opacity:v,display:w?"block":"none","border-radius":q,BorderRadius:q,MozBorderRadius:q,WebkitBorderRadius:q,zIndex:99}),K=s=="right"?{right:t}:{left:t};I.css(K),J.css(K),F.wrap(H),F.parent().append(J),F.parent().append(I),J.draggable({axis:"y",containment:"parent",start:function(){f=!0},stop:function(){f=!1,Q()},drag:function(b){M(0,a(this).position().top,!1)}}),I.hover(function(){P()},function(){Q()}),J.hover(function(){e=!0},function(){e=!1}),F.hover(function(){c=!0,P(),Q()},function(){c=!1,Q()});var L=function(a){if(!c)return;var a=a||window.event,b=0;a.wheelDelta&&(b=-a.wheelDelta/120),a.detail&&(b=a.detail/3),M(b,!0),a.preventDefault&&!l&&a.preventDefault(),l||(a.returnValue=!1)},N=function(){window.addEventListener?(this.addEventListener("DOMMouseScroll",L,!1),this.addEventListener("mousewheel",L,!1)):document.attachEvent("onmousewheel",L)};N(),O(),u=="bottom"?(J.css({top:F.outerHeight()-J.outerHeight()}),M(0,!0)):typeof u=="object"&&(M(a(u).position().top,null,!0),w||J.hide())}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);
